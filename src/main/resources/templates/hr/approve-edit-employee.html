<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/general.html :: head"></head>
<body>
<header th:replace="fragments/general.html::header"></header>

<div class="bg-white custom-shadow">
    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <h1 th:if="${#bools.isTrue(isApproved)}" class="text-3xl font-bold leading-tight text-gray-800">Edit Employee</h1>
        <h1 th:if="${#bools.isFalse(isApproved)}" class="text-3xl font-bold leading-tight text-gray-800">Approve Employee</h1>
    </div>
</div>


<div class="max-w-5xl mx-auto py-14">

    <form th:action="@{'/employee-portal/hr/employee/save'}" th:object="${employee}" method="POST">

        <input type="text" th:field="*{basicInfo.id}" th:value="*{basicInfo.id}" hidden>
        <input type="text" th:field="*{id}" th:value="*{id}" hidden>
        <input type="text" th:field="*{workShift.id}" th:value="*{workShift.id}" hidden>
        <input type="text" th:field="*{credentials.id}" th:value="*{credentials.id}" hidden>

        <input type="text" th:field="*{empDocuments}" th:value="*{empDocuments}" hidden>
        <input type="text" th:field="*{contracts}" th:value="*{contracts}" hidden>
        <input type="text" th:field="*{supervisor}" th:value="*{supervisor}" hidden>
        <input type="text" th:field="*{subordinates}" th:value="*{subordinates}" hidden>

        <div class="shadow overflow-hidden sm:rounded-md">
            <div class="px-4 py-5 bg-white sm:p-6">

                <div class="mb-4 flex justify-between">
                    <h4 class="text-lg leading-6 font-medium text-gray-900">Basic info</h4>
                    <a th:href="@{'/employee-portal/employee/' + ${employee.id}}"
                       class="border-2 border-gray-300 hover:border-indigo-600 hover:bg-indigo-600 px-2 text-md leading-6 font-medium text-gray-400 hover:text-white rounded-md">
                        Profile
                    </a>
                </div>
                <div class="grid grid-cols-8 gap-6">
                    <div class="col-span-8 sm:col-span-2">
                        <label for="firstName" class="block text-sm font-medium text-gray-700">First name</label>
                        <input th:field="*{basicInfo.firstName}" type="text" id="firstName"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.firstName')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-2">
                        <label for="lastName" class="block text-sm font-medium text-gray-700">Last name</label>
                        <input th:field="*{basicInfo.lastName}" type="text" id="lastName"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.lastName')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-2">
                        <label for="dateOfBirth" class="block text-sm font-medium text-gray-700">Date of birth</label>
                        <input th:field="*{basicInfo.dateOfBirth}" type="date" id="dateOfBirth"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.dateOfBirth')}" th:text="${error}">Validation error</div>
                    </div>
                </div>

                <div class="mt-10 mb-4">
                    <h4 class="text-lg leading-6 font-medium text-gray-900">Contacts</h4>
                </div>
                <div class="grid grid-cols-8 gap-6">

                    <div class="col-span-8 sm:col-span-2">
                        <label for="mobilePhone" class="block text-sm font-medium text-gray-700">Mobile phone</label>
                        <input th:field="*{basicInfo.mobilePhone}" type="tel" id="mobilePhone" placeholder="000-000-0000"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.mobilePhone')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-2">
                        <label for="personalEmail" class="block text-sm font-medium text-gray-700">Email address</label>
                        <input th:field="*{basicInfo.personalEmail}" type="email" id="personalEmail" placeholder="aaa@example.com"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.personalEmail')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-2">
                        <label for="socialSecurity" class="block text-sm font-medium text-gray-700">Social security number</label>
                        <input th:field="*{basicInfo.socialSecurity}" type="tel" id="socialSecurity" placeholder="AAA-GG-SSSS"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.socialSecurity')}" th:text="${error}">Validation error</div>
                    </div>

                </div>

                <div class="mt-10 mb-4">
                    <h4 class="text-lg leading-6 font-medium text-gray-900">Location</h4>
                </div>
                <div class="grid grid-cols-8 gap-6">

                    <div class="col-span-8 sm:col-span-4">
                        <label for="addressFirst" class="block text-sm font-medium text-gray-700">Street address</label>
                        <input th:field="*{basicInfo.addressFirst}" type="text" id="addressFirst"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.addressFirst')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-4">
                        <label for="addressSecond" class="block text-sm font-medium text-gray-700">Street address 2</label>
                        <input th:field="*{basicInfo.addressSecond}" type="text" id="addressSecond"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.addressSecond')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-6 lg:col-span-2">
                        <label for="city" class="block text-sm font-medium text-gray-700">City</label>
                        <input th:field="*{basicInfo.city}" type="text" id="city"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.city')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label for="state" class="block text-sm font-medium text-gray-700">State / Province</label>
                        <input th:field="*{basicInfo.state}" type="text" id="state"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.state')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label for="ZIP" class="block text-sm font-medium text-gray-700">ZIP / Postal</label>
                        <input th:field="*{basicInfo.ZIP}" type="text" id="ZIP" placeholder="00000{-0000}"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('basicInfo.ZIP')}" th:text="${error}">Validation error</div>
                    </div>

                </div>

                <div class="mt-10 mb-4">
                    <h4 class="text-lg leading-6 font-medium text-gray-900">Work info</h4>
                </div>

                <div class="grid grid-cols-8 gap-6">
                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label for="jobPosition" class="block text-sm font-medium text-gray-700">Department / Job Position</label>

                        <select class="mt-1 p-2 border border-gray-300 bg-white text-gray-900 block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md"
                                th:field="*{jobPosition}" id="jobPosition">
                            <optgroup th:label="${dep.name}" th:each="dep : ${departments}">
                                <option th:each="jobPos : ${dep.jobPositions}"
                                        th:value="${jobPos.id}" th:text="${jobPos.name}"></option>
                            </optgroup>
                        </select>
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('jobPosition')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label for="salary" class="block text-sm font-medium text-gray-700">Salary</label>
                        <input th:field="*{salary}" type="text" id="salary"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('salary')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label for="commission" class="block text-sm font-medium text-gray-700">Commission</label>
                        <input th:field="*{commission}" type="text" id="commission"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('commission')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label class="block text-sm font-medium text-gray-700">Work shift</label>
                        <div class="flex flex-row justify-between mt-1">
                            <div class="flex-grow">
                                <input th:field="*{workShift.beginning}" type="time" value="9:00" id="workShift.beginning"
                                       class="py-2 w-full border border-gray-300 bg-white text-gray-900 appearance-none block ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                                <div class="text-xs text-red-500" th:each="error : ${#fields.errors('workShift.beginning')}" th:text="${error}">Validation error</div>
                            </div>
                            <span class="px-2 self-center">–</span>
                            <div class="flex-grow">
                                <input th:field="*{workShift.ending}" type="time" value="17:00" id="workShift.ending"
                                       class="py-2 w-full border border-gray-300 bg-white text-gray-900 appearance-none block ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                                <div class="text-xs text-red-500" th:each="error : ${#fields.errors('workShift.ending')}" th:text="${error}">Validation error</div>
                            </div>
                        </div>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label class="flex justify-start items-start">
                            <div class="bg-white border-2 rounded border-gray-400 w-6 h-6 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500">
                                <input th:field="*{addedToPayroll}" type="checkbox" class="opacity-0 absolute">
                                <svg class="fill-current hidden w-4 h-4 text-indigo-500 pointer-events-none" viewBox="0 0 20 20"><path d="M0 11l2-2 5 5L18 3l2 2L7 18z"></path></svg>
                            </div>
                            <div class="select-none">Added to payroll</div>
                        </label>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label class="flex justify-start items-start">
                            <div class="bg-white border-2 rounded border-gray-400 w-6 h-6 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500">
                                <input th:field="*{completedTraining}" type="checkbox" class="opacity-0 absolute">
                                <svg class="fill-current hidden w-4 h-4 text-indigo-500 pointer-events-none" viewBox="0 0 20 20"><path d="M0 11l2-2 5 5L18 3l2 2L7 18z"></path></svg>
                            </div>
                            <div class="select-none">Completed training</div>
                        </label>
                    </div>


                </div>


                <div class="mt-10 mb-4">
                    <h4 class="text-lg leading-6 font-medium text-gray-900">Credentials</h4>
                </div>
                <div class="grid grid-cols-8 gap-6">
                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label for="credentials.email" class="block text-sm font-medium text-gray-700">Email</label>
                        <input th:field="*{credentials.email}" type="text" id="credentials.email"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('credentials.email')}" th:text="${error}">Validation error</div>
                    </div>

                    <div class="col-span-8 sm:col-span-3 lg:col-span-2">
                        <label for="credentials.password" class="block text-sm font-medium text-gray-700">Password</label>
                        <input th:field="*{credentials.password}" type="text" id="credentials.password"
                               class="mt-1 py-2 border border-gray-300 bg-white text-gray-900 appearance-none block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md">
                        <div class="text-xs text-red-500" th:each="error : ${#fields.errors('credentials.password')}" th:text="${error}">Validation error</div>
                    </div>

                </div>

            </div>



            <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
                <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    Submit
                </button>
            </div>
        </div>

    </form>

    <th:block th:if="${#bools.isTrue(isApproved)}">
        <div th:replace="fragments/contract-create-form :: contract-create-form"></div>
        <div th:replace="fragments/emp-document-upload-form.html :: document-upload-form"></div>


        <form th:if="${not #lists.isEmpty(supervisors)}"
              th:action="@{'/employee-portal/hr/employee/' + ${employee.id} + '/add-supervisor'}" th:object="${supervisorId}" method="post">

            <div class="my-8 shadow overflow-hidden sm:rounded-md">
                <div class="bg-white border-b border-gray-200 px-4 py-5 sm:px-6">
                    <h3 class="text-lg leading-6 font-medium text-gray-900">
                        Manage supervisor
                    </h3>
                </div>
                <div class="px-4 py-5 bg-white sm:p-6">
                    <div th:if="${employee.supervisor != null}" class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                        <span class="text-sm font-medium text-gray-500">Supervisor</span>
                        <a th:href="@{'/employee-portal/hr/employee/' + ${employee.supervisor.id}}"
                           th:text="${employee.supervisor.basicInfo.firstName} + ' ' + ${employee.supervisor.basicInfo.lastName}"
                           class="mt-1 text-sm text-gray-900 sm:mt-0">Some Kek</a>
                    </div>
                    <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                        <span class="text-sm font-medium text-gray-500">New</span>
                        <select class="mt-1 p-2 text-sm border border-gray-300 bg-white text-gray-900 block w-full ring-0 focus:ring-1 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none rounded-md"
                                th:field="*{id}" id="id">
                            <option th:each="supervisor : ${supervisors}" th:value="${supervisor.id}"
                                    th:text="${supervisor.basicInfo.firstName} + ' ' + ${supervisor.basicInfo.lastName}"></option>
                        </select>
                    </div>
                </div>
                <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Submit
                    </button>
                </div>
            </div>
        </form>
    </th:block>
</div>


<footer th:replace="fragments/general.html :: footer"></footer>
</body>
</html>

